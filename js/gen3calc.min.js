var input,advMode={enabled:!1},currentPick="AtkType",AtkType="normal",DefTypeA="normal",DefTypeB="none",typeReference={normal:{type:"Physical",none:1,normal:1,fire:1,water:1,grass:1,electric:1,ice:1,psychic:1,ghost:0,dark:1,poison:1,ground:1,rock:0.5,steel:0.5,fighting:1,flying:1,bug:1,dragon:1},fire:{type:"Special",none:1,normal:1,fire:0.5,water:0.5,grass:2,electric:1,ice:2,psychic:1,ghost:1,dark:1,poison:1,ground:1,rock:0.5,steel:2,fighting:1,flying:1,bug:2,dragon:0.5},water:{type:"Special",none:1,normal:1,fire:2,water:0.5,grass:0.5,electric:1,ice:1,psychic:1,ghost:1,dark:1,poison:1,ground:2,rock:2,steel:1,fighting:1,flying:1,bug:1,dragon:0.5},grass:{type:"Special",none:1,normal:1,fire:0.5,water:2,grass:0.5,electric:1,ice:1,psychic:1,ghost:1,dark:1,poison:0.5,ground:2,rock:2,steel:0.5,fighting:1,flying:0.5,bug:0.5,dragon:0.5},electric:{type:"Special",none:1,normal:1,fire:1,water:2,grass:0.5,electric:0.5,ice:1,psychic:1,ghost:1,dark:1,poison:1,ground:0,rock:1,steel:1,fighting:1,flying:2,bug:1,dragon:0.5},ice:{type:"Special",none:1,normal:1,fire:0.5,water:0.5,grass:2,electric:1,ice:0.5,psychic:1,ghost:1,dark:1,poison:1,ground:2,rock:1,steel:0.5,fighting:1,flying:2,bug:1,dragon:2},psychic:{type:"Special",none:1,normal:1,fire:1,water:1,grass:1,electric:1,ice:1,psychic:0.5,ghost:1,dark:0,poison:2,ground:1,rock:1,steel:0.5,fighting:2,flying:1,bug:1,dragon:1},ghost:{type:"Physical",none:1,normal:0,fire:1,water:1,grass:1,electric:1,ice:1,psychic:2,ghost:2,dark:0.5,poison:1,ground:1,rock:1,steel:0.5,fighting:1,flying:1,bug:1,dragon:1},dark:{type:"Special",none:1,normal:1,fire:1,water:1,grass:1,electric:1,ice:1,psychic:2,ghost:2,dark:0.5,poison:1,ground:1,rock:1,steel:0.5,fighting:0.5,flying:1,bug:1,dragon:1},poison:{type:"Physical",none:1,normal:1,fire:1,water:1,grass:2,electric:1,ice:1,psychic:1,ghost:0.5,dark:1,poison:0.5,ground:0.5,rock:0.5,steel:0,fighting:1,flying:1,bug:1,dragon:1},ground:{type:"Physical",none:1,normal:1,fire:2,water:1,grass:0.5,electric:2,ice:1,psychic:1,ghost:1,dark:1,poison:2,ground:1,rock:2,steel:2,fighting:1,flying:0,bug:0.5,dragon:1},rock:{type:"Physical",none:1,normal:1,fire:2,water:1,grass:1,electric:1,ice:2,psychic:1,ghost:1,dark:1,poison:1,ground:0.5,rock:1,steel:0.5,fighting:0.5,flying:2,bug:2,dragon:1},steel:{type:"Physical",none:1,normal:1,fire:0.5,water:0.5,grass:1,electric:0.5,ice:2,psychic:1,ghost:1,dark:1,poison:1,ground:1,rock:2,steel:0.5,fighting:1,flying:1,bug:1,dragon:1},fighting:{type:"Physical",none:1,normal:2,fire:1,water:1,grass:1,electric:1,ice:2,psychic:0.5,ghost:0,dark:2,poison:0.5,ground:1,rock:2,steel:2,fighting:1,flying:0.5,bug:0.5,dragon:1},flying:{type:"Physical",none:1,normal:1,fire:1,water:1,grass:2,electric:0.5,ice:1,psychic:1,ghost:1,dark:1,poison:1,ground:1,rock:0.5,steel:0.5,fighting:2,flying:1,bug:2,dragon:1},bug:{type:"Physical",none:1,normal:1,fire:0.5,water:1,grass:2,electric:1,ice:1,psychic:2,ghost:0.5,dark:2,poison:0.5,ground:1,rock:1,steel:0.5,fighting:0.5,flying:0.5,bug:1,dragon:1},dragon:{type:"Special",none:1,normal:1,fire:1,water:1,grass:1,electric:1,ice:1,psychic:1,ghost:1,dark:1,poison:1,ground:1,rock:1,steel:0.5,fighting:1,flying:1,bug:1,dragon:2},blankcopy:{type:"Physical",none:1,normal:1,fire:1,water:1,grass:1,electric:1,ice:1,psychic:1,ghost:1,dark:1,poison:1,ground:1,rock:1,steel:1,fighting:1,flying:1,bug:1,dragon:1}};function rollDamage(g){rolls=[],rollsVerbose="";for(let j=85;101>j;j++)roll=0|g*j/100,rolls.push(roll),rollsVerbose+=roll,100!=j&&(rollsVerbose+=", ");return{rolls:rolls.reverse(),rollsVerbose:rollsVerbose}}function DamageCalc(){void 0==input&&(input=document.getElementsByForm("calcInput"));let g,j;advMode.enabled&&(advMode.suggestDefenderHP(),g=advMode.calcAttacker(),g&&(input.attackerAtkStat.value=g),j=advMode.calcDefender(),j&&(input.defenderDefStat.value=j)),g=input.attackerAtkStat.valueAsNumber,j=input.defenderDefStat.valueAsNumber;let C,D,E,k=input.attackerMoveBP.valueAsNumber,q=radioValue("weathercheck"),x=input.attackerAtkStage.valueAsNumber,z=input.defenderDefStage.valueAsNumber,A=input.attackerLevel.valueAsNumber,B=input.defenderHPStat.valueAsNumber,F="[Level "+input.attackerLevel.value+" ";0<=x&&(F+="+"),F+=x+" "+g+" ",""!=input.attackerDataset.value&&(F+=input.attackerDataset.value.split(",")[0]+" "),F+="with "+k+"BP] vs [",0<=z&&(F+="+"),F+=z+" "+j+" ",""!=input.defenderDataset.value&&(F+=input.defenderDataset.value.split(",")[0]+" "),F+="with "+input.defenderHPStat.value+"HP]";let G=F+"\n";switch(input.badgeBoostAtk.checked&&(g=0|1.1*g),input.badgeBoostDef.checked&&(j=0|1.1*j),input.itemBoost.checked&&(g=0|1.1*g),input.abilityBoost.checked&&(k=0|1.5*k),!0){case 0<x:aSM=(10+5*x)/10;break;case 0>x:aSM=10/(10+-5*x);break;default:aSM=1;}switch(!0){case 0>z:dSM=10/(10+-5*z);break;case 0<z:dSM=(10+5*z)/10;break;default:dSM=1;}C=0|Math.trunc(Math.trunc(2*A/5+2)*(g*aSM)*k/(j*dSM))/50,D=0|Math.trunc(Math.trunc(2*A/5+2)*(g*(0>=x?1:aSM))*k/(j*(0<=z?1:dSM)))/50,input.lsrefcheck.checked&&(input.doublecheck.checked?(C=0|C*(2/3),D=0|D*(2/3)):(C=0|0.5*C,D=0|0.5*D)),input.doublecheck.checked&&(C=0|0.5*C,D=0|0.5*D),"goodweather"===q?(C=0|1.5*C,D=0|1.5*D):"badweather"===q?(C=0|0.5*C,D=0|0.5*D):void 0,C+=2,D+=2,D*=2,input.stabcheck.checked&&(C=0|1.5*C,D=0|1.5*D),C=0|C*input.typeeffect.value,D=0|D*input.typeeffect.value;let H=rollDamage(C),I=rollDamage(D);if(H.rolls[15]<B)H.OHKO=0;else{E=0;for(let J of H.rolls)if(J>=B)E++;else break;H.OHKO=100*(E/16)}if(H.minRollPercentage=0|100*(H.rolls[15]/B),H.maxRollPercentage=0|100*(H.rolls[0]/B),G+=input.outputVerbose.checked?H.rollsVerbose:H.rolls[15]+" ("+H.minRollPercentage+"%)  - "+H.rolls[0]+" ("+H.maxRollPercentage+"%)",G+="\n"+H.OHKO+"% chance to OHKO",input.outputVerbose.checked&&(G+=" ("+H.minRollPercentage+"% to "+H.maxRollPercentage+"%)"),input.showCrits.checked){if(I.rolls[15]<B)I.OHKO=0;else{E=0;for(let J of H.rolls)if(J>=B)E++;else break;I.OHKO=100*(E/16)}I.minRollPercentage=0|100*(I.rolls[15]/B),I.maxRollPercentage=0|100*(I.rolls[0]/B),input.outputarea.style.height="102px",G+="\n"+F+" CRIT\n",G+=input.outputVerbose.checked?I.rollsVerbose+"\n"+I.OHKO+"% chance to OHKO ("+I.minRollPercentage+"% to "+I.maxRollPercentage+"%)":I.rolls[15]+" ("+I.minRollPercentage+"%)  - "+I.rolls[0]+" ("+I.maxRollPercentage+"%)\n"+I.OHKO+"% chance to OHKO"}else input.outputarea.style.height="56px";switch(input.outputarea.innerHTML=G,H.OHKO){case 0:input.outputarea.className="lives";break;case 100:input.outputarea.className="kill";break;default:input.outputarea.className="range";}}function pokeSearch(g){let j,q;switch(g.name){case"attackerName":j=document.querySelector("#search-attacker>table>tbody").children,q=$("#search-attacker-empty-result"),q.hide(),advMode.clearAttacker();break;case"defenderName":j=document.querySelector("#search-defender>table>tbody").children,q=$("#search-defender-empty-result"),q.hide(),advMode.clearDefender();break;default:return!1;}if(""==g.value){for(let z of j)z.style.display="table-row";return!1}let x=!1;for(let z of j)-1===z.dataset.pokemonname.indexOfIgnoreCase(g.value)?z.style.display="none":(z.style.display="table-row",x=!0);!1==x&&q.show(),DamageCalc()}function pokeSearchPick(g,j){let q,k=g.dataset;switch(j){case"attacker":q=[document.getElementById("attacker-name"),document.getElementById("attacker-icon"),document.getElementById("attacker-dataset")];break;case"defender":q=[document.getElementById("defender-name"),document.getElementById("defender-icon"),document.getElementById("defender-dataset")];break;default:return!1;}q[0].value=k.pokemonname,q[1].src="i/mons/icons/"+k.pokemonid+".png",("attacker"==j&&advMode.enabled||"defender"==j)&&(q[2].value=k.pokemonname+","+k.pokemonstats);let x=k.pokemontype.split(",");"defender"==j&&(currentPick="DefTypeA",pickType(x[0],!1),currentPick="DefTypeB",pickType(x[1],!1),advMode.enabled&&advMode.suggestDefenderHP()),DamageCalc()}async function pokeSearchInstall(){let g=new XMLHttpRequest;g.open("GET","js/pokestats.json"),g.onload=()=>{let x,z,j=JSON.parse(g.responseText).pokemon,k=$("#search-attacker").find("table>tbody"),q=$("#search-defender").find("table>tbody");for(mon of j)x=$("<tr/>",{"data-pokemonname":mon.name,"data-pokemonid":mon.id,"data-pokemontype":mon.type.join(","),"data-pokemonstats":mon.basestats.join(",")}),x.append($("<td/>").append($("<img>",{src:"i/mons/icons/"+mon.id+".png",alt:mon.id}))).append($("<td/>").html(mon.id)).append($("<td/>",{colspan:4}).html(mon.name)).append($("<td/>",{colspan:"none"==mon.type[1]?2:1}).append($("<img>",{src:"i/"+mon.type[0]+".gif",alt:mon.type[0],"class":"poketype"}))),"none"!=mon.type[1]&&x.append($("<td/>").append($("<img>",{src:"i/"+mon.type[1]+".gif",alt:mon.type[1],"class":"poketype"}))),z=x.clone(),x.on("mousedown",function(){pokeSearchPick(this,"attacker")}),x.appendTo(k),z.on("mousedown",function(){pokeSearchPick(this,"defender")}),z.appendTo(q)},g.send()}function openTypePicker(g){pickerDIV=document.getElementById("typePicker");"AtkType"===g?(pickerDIV.getElementsByTagName("span")[0].innerHTML="Choose the Attack Type:",pickerDIV.style.left="172px",$(pickerDIV.getElementsByTagName("img")[0]).hide()):"DefTypeA"===g?(pickerDIV.getElementsByTagName("span")[0].innerHTML="Choose the Defender's first type:",pickerDIV.style.left="572px",$(pickerDIV.getElementsByTagName("img")[0]).hide()):"DefTypeB"===g?(pickerDIV.getElementsByTagName("span")[0].innerHTML="Choose the Defender's secondary type:",pickerDIV.style.left="718px",$(pickerDIV.getElementsByTagName("img")[0]).show()):void 0;pickerDIV.style.top="336px",currentPick=g,$(pickerDIV).show(),$("#typePicker-clicktrap").show()}function pickType(g,j){document.getElementById(currentPick+"Img").src="i/"+g+".gif";"AtkType"===currentPick?(AtkType=g,$("#lsreflabel")[0].innerHTML="Physical"==typeReference[g].type?"Does Reflect apply?":"Does Light Screen apply?"):"DefTypeA"===currentPick?(DefTypeA=g,!1!==j&&advMode.clearDefender()):"DefTypeB"===currentPick?(DefTypeB=g,!1!==j&&advMode.clearDefender()):void 0;$("#typePicker").hide(),$("#typePicker-clicktrap").hide(),document.getElementById("typeeffect").value=typeReference[AtkType][DefTypeA]*typeReference[AtkType][DefTypeB],document.getElementById("MoveType").src="i/"+typeReference[AtkType].type+".png",document.getElementById("MoveTypeText").innerHTML=typeReference[AtkType].type,DamageCalc()}function collectionAppendCurrent(){currentCalc=document.getElementById("calcInput").elements.outputarea.value,userTitle=document.getElementById("save-dialog").elements.calcName,currentCollection=document.getElementById("calc-collection").elements.collection,currentCollection.value+=userTitle.value+"\n",currentCollection.value+=currentCalc,currentCollection.value+="\r\n \r\n",$("#save-dialog").hide(),$("#save-options").show(),$("#collection-options").show(),$("#calc-collection").show(),currentCollection.style.height=currentCollection.scrollHeight-28+"px",userTitle.value=""}function collectionSaveDialog(){return $("#save-dialog").show().find("input[type=text]").focus(),void $("#save-options").hide()}function collectionSaveAs(){if(collectionArea=document.getElementById("collectionarea"),""==collectionArea.value)return!1;collectionContent=collectionArea.value.replace(/([^\r])\n/g,"$1\r\n");var g=new Blob([collectionContent],{type:"text/plain;charset=Windows-1252"});d=new Date,saveDate="",10>d.getDate()&&(saveDate+="0"),saveDate+=d.getDate(),10>d.getMonth()+1&&(saveDate+="0"),saveDate+=d.getMonth()+1,saveDate+=d.getFullYear(),10>d.getHours()&&(saveDate+="0"),saveDate+=d.getHours(),10>d.getMinutes()&&(saveDate+="0"),saveDate+=d.getMinutes(),fileName="damage-calcs-"+saveDate+".txt",saveAs(g,fileName)}function collectionClear(){document.getElementById("collectionarea").value="",currentCollection.style.height=currentCollection.scrollHeight+"px",$("#collection-options").hide(),$("#calc-collection").hide()}advMode.toggle=function(){advMode.enabled?($("#calcInput").removeClass("advanced-enabled"),advMode.clearAttacker("i/atk.png"),advMode.enabled=!1):($("#calcInput").addClass("advanced-enabled"),document.getElementById("attacker-icon").src="i/mons/icons/000.png",advMode.enabled=!0),DamageCalc()},advMode.calcAttacker=function(){let z,A,g=input.attackerAtkStatIv.valueAsNumber,j=input.attackerAtkStatEv.valueAsNumber,k=input.attackerLevel.valueAsNumber,q=radioValue("attackerNature"),x=input.attackerDataset.value;return""!=x&&(x=x.split(","),A="Physical"==typeReference[AtkType].type?+x[2]:+x[4],z=0|(0|(2*A+g+(0|j/4))*k/100+5)*("positive"==q?1.1:"negative"==q?0.9:1),z)},advMode.calcDefender=function(){let z,A,g=input.defenderDefStatIv.valueAsNumber,j=input.defenderDefStatEv.valueAsNumber,k=input.defenderLevel.valueAsNumber,q=radioValue("defenderNature"),x=input.defenderDataset.value;return""!=x&&(x=x.split(","),A="Physical"==typeReference[AtkType].type?+x[3]:+x[5],z=0|(0|(2*A+g+(0|j/4))*k/100+5)*("positive"==q?1.1:"negative"==q?0.9:1),z)},advMode.clearAttacker=function(g){$("#attacker-dataset")[0].value="",$("#attacker-icon")[0].src=g||"i/mons/icons/000.png"},advMode.clearDefender=function(g){$("#defender-dataset")[0].value="",$("#defender-icon")[0].src=g||"i/mons/icons/000.png",$("#defenderHPStatLabel").html("Current HP:"),input.defenderHPStat.max=999},advMode.suggestDefenderHP=function(){let g,j,k=input.defenderLevel.valueAsNumber,q=input.defenderDataset.value;return""!=q&&void(q=q.split(","),j=q[1],g=(0|(2*j+31+63)*k/100)+k+10,input.defenderHPStat.valueAsNumber>g&&(input.defenderHPStat.value=g),$("#defenderHPStatLabel").html("Current HP (up to "+g+"):"),input.defenderHPStat.max=g)},!function(g){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=g();else if("function"==typeof define&&define.amd)define([],g);else{var j;j="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,j.Clipboard=g()}}(function(){var g;return function q(x,z,A){function B(E,F){if(!z[E]){if(!x[E]){var G="function"==typeof require&&require;if(!F&&G)return G(E,!0);if(C)return C(E,!0);var H=new Error("Cannot find module '"+E+"'");throw H.code="MODULE_NOT_FOUND",H}var I=z[E]={exports:{}};x[E][0].call(I.exports,function(J){var K=x[E][1][J];return B(K||J)},I,I.exports,q,x,z,A)}return z[E].exports}for(var C="function"==typeof require&&require,D=0;D<A.length;D++)B(A[D]);return B}({1:[function(q,x){if("undefined"!=typeof Element&&!Element.prototype.matches){var C=Element.prototype;C.matches=C.matchesSelector||C.mozMatchesSelector||C.msMatchesSelector||C.oMatchesSelector||C.webkitMatchesSelector}x.exports=function(D,E){for(;D&&D.nodeType!==9;){if("function"==typeof D.matches&&D.matches(E))return D;D=D.parentNode}}},{}],2:[function(q,x){function B(D,E,F,G){return function(H){H.delegateTarget=C(H.target,E),H.delegateTarget&&G.call(D,H)}}var C=q("./closest");x.exports=function(D,E,F,G,H){var I=B.apply(this,arguments);return D.addEventListener(F,I,H),{destroy:function(){D.removeEventListener(F,I,H)}}}},{"./closest":1}],3:[function(q,x,z){z.node=function(A){return void 0!==A&&A instanceof HTMLElement&&1===A.nodeType},z.nodeList=function(A){var B=Object.prototype.toString.call(A);return void 0!==A&&("[object NodeList]"===B||"[object HTMLCollection]"===B)&&"length"in A&&(0===A.length||z.node(A[0]))},z.string=function(A){return"string"==typeof A||A instanceof String},z.fn=function(A){return"[object Function]"===Object.prototype.toString.call(A)}},{}],4:[function(q,x){function B(G,H,I){return G.addEventListener(H,I),{destroy:function(){G.removeEventListener(H,I)}}}function C(G,H,I){return Array.prototype.forEach.call(G,function(J){J.addEventListener(H,I)}),{destroy:function(){Array.prototype.forEach.call(G,function(J){J.removeEventListener(H,I)})}}}function D(G,H,I){return F(document.body,G,H,I)}var E=q("./is"),F=q("delegate");x.exports=function(G,H,I){if(!G&&!H&&!I)throw new Error("Missing required arguments");if(!E.string(H))throw new TypeError("Second argument must be a String");if(!E.fn(I))throw new TypeError("Third argument must be a Function");if(E.node(G))return B(G,H,I);if(E.nodeList(G))return C(G,H,I);if(E.string(G))return D(G,H,I);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},{"./is":3,delegate:2}],5:[function(q,x){x.exports=function(B){var C;if("SELECT"===B.nodeName)B.focus(),C=B.value;else if("INPUT"===B.nodeName||"TEXTAREA"===B.nodeName){var D=B.hasAttribute("readonly");D||B.setAttribute("readonly",""),B.select(),B.setSelectionRange(0,B.value.length),D||B.removeAttribute("readonly"),C=B.value}else{B.hasAttribute("contenteditable")&&B.focus();var E=window.getSelection(),F=document.createRange();F.selectNodeContents(B),E.removeAllRanges(),E.addRange(F),C=E.toString()}return C}},{}],6:[function(q,x){function A(){}A.prototype={on:function(B,C,D){var E=this.e||(this.e={});return(E[B]||(E[B]=[])).push({fn:C,ctx:D}),this},once:function(B,C,D){function E(){F.off(B,E),C.apply(D,arguments)}var F=this;return E._=C,this.on(B,E,D)},emit:function(B){var C=[].slice.call(arguments,1),D=((this.e||(this.e={}))[B]||[]).slice(),E=0,F=D.length;for(E;E<F;E++)D[E].fn.apply(D[E].ctx,C);return this},off:function(B,C){var D=this.e||(this.e={}),E=D[B],F=[];if(E&&C)for(var G=0,H=E.length;G<H;G++)E[G].fn!==C&&E[G].fn._!==C&&F.push(E[G]);return F.length?D[B]=F:delete D[B],this}},x.exports=A},{}],7:[function(q,x,z){!function(A,B){if("function"==typeof g&&g.amd)g(["module","select"],B);else if(void 0!==z)B(x,q("select"));else{var C={exports:{}};B(C,A.select),A.clipboardAction=C.exports}}(this,function(A,B){"use strict";function D(I,J){if(!(I instanceof J))throw new TypeError("Cannot call a class as a function")}var E=function(I){return I&&I.__esModule?I:{default:I}}(B),F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(I){return typeof I}:function(I){return I&&"function"==typeof Symbol&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},G=function(){function I(J,K){for(var M,L=0;L<K.length;L++)M=K[L],M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(J,M.key,M)}return function(J,K,L){return K&&I(J.prototype,K),L&&I(J,L),J}}(),H=function(){function I(J){D(this,I),this.resolveOptions(J),this.initSelection()}return G(I,[{key:"resolveOptions",value:function(){var K=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action=K.action,this.container=K.container,this.emitter=K.emitter,this.target=K.target,this.text=K.text,this.trigger=K.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var K=this,L="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return K.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[L?"right":"left"]="-9999px";var M=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=M+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,E.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,E.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var K;try{K=document.execCommand(this.action)}catch(L){K=!1}this.handleResult(K)}},{key:"handleResult",value:function(K){this.emitter.emit(K?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var K=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=K,"copy"!==this._action&&"cut"!==this._action)throw new Error("Invalid \"action\" value, use either \"copy\" or \"cut\"")},get:function(){return this._action}},{key:"target",set:function(K){if(void 0!==K){if(!K||"object"!==(void 0===K?"undefined":F(K))||1!==K.nodeType)throw new Error("Invalid \"target\" value, use a valid Element");if("copy"===this.action&&K.hasAttribute("disabled"))throw new Error("Invalid \"target\" attribute. Please use \"readonly\" instead of \"disabled\" attribute");if("cut"===this.action&&(K.hasAttribute("readonly")||K.hasAttribute("disabled")))throw new Error("Invalid \"target\" attribute. You can't cut text from elements with \"readonly\" or \"disabled\" attributes");this._target=K}},get:function(){return this._target}}]),I}();A.exports=H})},{select:5}],8:[function(q,x,z){!function(A,B){if("function"==typeof g&&g.amd)g(["module","./clipboard-action","tiny-emitter","good-listener"],B);else if(void 0!==z)B(x,q("./clipboard-action"),q("tiny-emitter"),q("good-listener"));else{var C={exports:{}};B(C,A.clipboardAction,A.tinyEmitter,A.goodListener),A.clipboard=C.exports}}(this,function(A,B,C,D){"use strict";function E(P){return P&&P.__esModule?P:{default:P}}function F(P,Q){if(!(P instanceof Q))throw new TypeError("Cannot call a class as a function")}function G(P,Q){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Q&&("object"==typeof Q||"function"==typeof Q)?Q:P}function H(P,Q){if("function"!=typeof Q&&null!==Q)throw new TypeError("Super expression must either be null or a function, not "+typeof Q);P.prototype=Object.create(Q&&Q.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),Q&&(Object.setPrototypeOf?Object.setPrototypeOf(P,Q):P.__proto__=Q)}function I(P,Q){var R="data-clipboard-"+P;if(Q.hasAttribute(R))return Q.getAttribute(R)}var J=E(B),K=E(C),L=E(D),M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(P){return typeof P}:function(P){return P&&"function"==typeof Symbol&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},N=function(){function P(Q,R){for(var U,T=0;T<R.length;T++)U=R[T],U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(Q,U.key,U)}return function(Q,R,T){return R&&P(Q.prototype,R),T&&P(Q,T),Q}}(),O=function(P){function Q(R,T){F(this,Q);var U=G(this,(Q.__proto__||Object.getPrototypeOf(Q)).call(this));return U.resolveOptions(T),U.listenClick(R),U}return H(Q,P),N(Q,[{key:"resolveOptions",value:function(){var T=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof T.action?T.action:this.defaultAction,this.target="function"==typeof T.target?T.target:this.defaultTarget,this.text="function"==typeof T.text?T.text:this.defaultText,this.container="object"===M(T.container)?T.container:document.body}},{key:"listenClick",value:function(T){var U=this;this.listener=(0,L.default)(T,"click",function(V){return U.onClick(V)})}},{key:"onClick",value:function(T){var U=T.delegateTarget||T.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new J.default({action:this.action(U),target:this.target(U),text:this.text(U),container:this.container,trigger:U,emitter:this})}},{key:"defaultAction",value:function(T){return I("action",T)}},{key:"defaultTarget",value:function(T){var U=I("target",T);if(U)return document.querySelector(U)}},{key:"defaultText",value:function(T){return I("text",T)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var T=0<arguments.length&&void 0!==arguments[0]?arguments[0]:["copy","cut"],U="string"==typeof T?[T]:T,V=!!document.queryCommandSupported;return U.forEach(function(W){V=V&&!!document.queryCommandSupported(W)}),V}}]),Q}(K.default);A.exports=O})},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)});document.getElementsByForm=function(g){let j,k,q=new TypeError("form must be valid DOM or a string with either id or name of the form.");switch(typeof g){case"string":if(""==g)throw q;if(k=document.getElementById(g),null===k){for(k=document.getElementsByTagName("FORM"),j=0;j<k.length;j++)if(k[j].name==g){g=k[j];break}if("string"==typeof g)throw q}else if("FORM"==k.tagName)g=k;else throw q;case"object":if("FORM"==g.tagName&&g.elements)return 0==g.elements.length?null:g.elements;throw q;break;default:throw q;}};function radioValue(g){if(void 0===g||""==g)throw new TypeError("name must be a string and cannot be empty");let j=document.getElementsByName(g);for(let k=0;k<j.length;k++)if("radio"==j[k].type&&j[k].checked)return j[k].value;return!1}String.prototype.equalsIgnoreCase=function(g){if(void 0===g||""==g)throw new TypeError("str cannot be empty");return this.toLowerCase()==(g+"").toLowerCase()},String.prototype.indexOfIgnoreCase=function(g){if(void 0===g||""==g)throw new TypeError("needle cannot be empty");return this.toLowerCase().indexOf((g+"").toLowerCase())};var saveAs=saveAs||function(g){"use strict";if(!("undefined"==typeof g||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var j=g.document,k=function(){return g.URL||g.webkitURL||g},q=j.createElementNS("http://www.w3.org/1999/xhtml","a"),z=function(L){var M=new MouseEvent("click");L.dispatchEvent(M)},A=/constructor/i.test(g.HTMLElement)||g.safari,B=/CriOS\/[\d]+/.test(navigator.userAgent),C=function(L){(g.setImmediate||g.setTimeout)(function(){throw L},0)},F=function(L){setTimeout(function(){"string"==typeof L?k().revokeObjectURL(L):L.remove()},4e4)},G=function(L,M,N){M=[].concat(M);for(var P,O=M.length;O--;)if(P=L["on"+M[O]],"function"==typeof P)try{P.call(L,N||L)}catch(Q){C(Q)}},H=function(L){return /^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(L.type)?new Blob([String.fromCharCode(65279),L],{type:L.type}):L},I=function(L,M,N){N||(L=H(L));var O,P=this,Q=L.type,R=Q==="application/octet-stream",T=function(){G(P,"writestart progress write writeend".split(" "))};return P.readyState=P.INIT,"download"in q?(O=k().createObjectURL(L),void setTimeout(function(){q.href=O,q.download=M,z(q),T(),F(O),P.readyState=P.DONE})):void function(){if((B||R&&A)&&g.FileReader){var V=new FileReader;return V.onloadend=function(){var X=B?V.result:V.result.replace(/^data:[^;]*;/,"data:attachment/file;"),Y=g.open(X,"_blank");Y||(g.location.href=X),X=void 0,P.readyState=P.DONE,T()},V.readAsDataURL(L),void(P.readyState=P.INIT)}if(O||(O=k().createObjectURL(L)),R)g.location.href=O;else{var W=g.open(O,"_blank");W||(g.location.href=O)}P.readyState=P.DONE,T(),F(O)}()},J=I.prototype,K=function(L,M,N){return new I(L,M||L.name||"download",N)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(L,M,N){return M=M||L.name||"download",N||(L=H(L)),navigator.msSaveOrOpenBlob(L,M)}:(J.abort=function(){},J.readyState=J.INIT=0,J.WRITING=1,J.DONE=2,J.error=J.onwritestart=J.onprogress=J.onwrite=J.onabort=J.onerror=J.onwriteend=null,K)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this);"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define("FileSaver.js",function(){return saveAs});