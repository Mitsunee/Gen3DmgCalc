var input,advMode={enabled:!1},currentPick="AtkType",AtkType="normal",DefTypeA="normal",DefTypeB="none",typeReference={normal:{type:"Physical",none:1,normal:1,fire:1,water:1,grass:1,electric:1,ice:1,psychic:1,ghost:0,dark:1,poison:1,ground:1,rock:.5,steel:.5,fighting:1,flying:1,bug:1,dragon:1},fire:{type:"Special",none:1,normal:1,fire:.5,water:.5,grass:2,electric:1,ice:2,psychic:1,ghost:1,dark:1,poison:1,ground:1,rock:.5,steel:2,fighting:1,flying:1,bug:2,dragon:.5},water:{type:"Special",none:1,normal:1,fire:2,water:.5,grass:.5,electric:1,ice:1,psychic:1,ghost:1,dark:1,poison:1,ground:2,rock:2,steel:1,fighting:1,flying:1,bug:1,dragon:.5},grass:{type:"Special",none:1,normal:1,fire:.5,water:2,grass:.5,electric:1,ice:1,psychic:1,ghost:1,dark:1,poison:.5,ground:2,rock:2,steel:.5,fighting:1,flying:.5,bug:.5,dragon:.5},electric:{type:"Special",none:1,normal:1,fire:1,water:2,grass:.5,electric:.5,ice:1,psychic:1,ghost:1,dark:1,poison:1,ground:0,rock:1,steel:1,fighting:1,flying:2,bug:1,dragon:.5},ice:{type:"Special",none:1,normal:1,fire:.5,water:.5,grass:2,electric:1,ice:.5,psychic:1,ghost:1,dark:1,poison:1,ground:2,rock:1,steel:.5,fighting:1,flying:2,bug:1,dragon:2},psychic:{type:"Special",none:1,normal:1,fire:1,water:1,grass:1,electric:1,ice:1,psychic:.5,ghost:1,dark:0,poison:2,ground:1,rock:1,steel:.5,fighting:2,flying:1,bug:1,dragon:1},ghost:{type:"Physical",none:1,normal:0,fire:1,water:1,grass:1,electric:1,ice:1,psychic:2,ghost:2,dark:.5,poison:1,ground:1,rock:1,steel:.5,fighting:1,flying:1,bug:1,dragon:1},dark:{type:"Special",none:1,normal:1,fire:1,water:1,grass:1,electric:1,ice:1,psychic:2,ghost:2,dark:.5,poison:1,ground:1,rock:1,steel:.5,fighting:.5,flying:1,bug:1,dragon:1},poison:{type:"Physical",none:1,normal:1,fire:1,water:1,grass:2,electric:1,ice:1,psychic:1,ghost:.5,dark:1,poison:.5,ground:.5,rock:.5,steel:0,fighting:1,flying:1,bug:1,dragon:1},ground:{type:"Physical",none:1,normal:1,fire:2,water:1,grass:.5,electric:2,ice:1,psychic:1,ghost:1,dark:1,poison:2,ground:1,rock:2,steel:2,fighting:1,flying:0,bug:.5,dragon:1},rock:{type:"Physical",none:1,normal:1,fire:2,water:1,grass:1,electric:1,ice:2,psychic:1,ghost:1,dark:1,poison:1,ground:.5,rock:1,steel:.5,fighting:.5,flying:2,bug:2,dragon:1},steel:{type:"Physical",none:1,normal:1,fire:.5,water:.5,grass:1,electric:.5,ice:2,psychic:1,ghost:1,dark:1,poison:1,ground:1,rock:2,steel:.5,fighting:1,flying:1,bug:1,dragon:1},fighting:{type:"Physical",none:1,normal:2,fire:1,water:1,grass:1,electric:1,ice:2,psychic:.5,ghost:0,dark:2,poison:.5,ground:1,rock:2,steel:2,fighting:1,flying:.5,bug:.5,dragon:1},flying:{type:"Physical",none:1,normal:1,fire:1,water:1,grass:2,electric:.5,ice:1,psychic:1,ghost:1,dark:1,poison:1,ground:1,rock:.5,steel:.5,fighting:2,flying:1,bug:2,dragon:1},bug:{type:"Physical",none:1,normal:1,fire:.5,water:1,grass:2,electric:1,ice:1,psychic:2,ghost:.5,dark:2,poison:.5,ground:1,rock:1,steel:.5,fighting:.5,flying:.5,bug:1,dragon:1},dragon:{type:"Special",none:1,normal:1,fire:1,water:1,grass:1,electric:1,ice:1,psychic:1,ghost:1,dark:1,poison:1,ground:1,rock:1,steel:.5,fighting:1,flying:1,bug:1,dragon:2},blankcopy:{type:"Physical",none:1,normal:1,fire:1,water:1,grass:1,electric:1,ice:1,psychic:1,ghost:1,dark:1,poison:1,ground:1,rock:1,steel:1,fighting:1,flying:1,bug:1,dragon:1}};function rollDamage(a){rolls=[],rollsVerbose="";for(let b=85;101>b;b++)roll=0|a*b/100,rolls.push(roll),rollsVerbose+=roll,100!=b&&(rollsVerbose+=", ");return{rolls:rolls.reverse(),rollsVerbose:rollsVerbose}}function DamageCalc(){void 0===input&&(input=document.getElementsByForm("calcInput"));let a,b;advMode.enabled&&(advMode.suggestDefenderHP(),a=advMode.calcAttacker(),a&&(input.attackerAtkStat.value=a),b=advMode.calcDefender(),b&&(input.defenderDefStat.value=b)),a=input.attackerAtkStat.valueAsNumber,b=input.defenderDefStat.valueAsNumber;let c,e,f,g=input.attackerMoveBP.valueAsNumber,h=radioValue("weathercheck"),j=input.attackerAtkStage.valueAsNumber,k=input.defenderDefStage.valueAsNumber,l=input.attackerLevel.valueAsNumber,m=input.defenderHPStat.valueAsNumber,n="[Level "+input.attackerLevel.value+" ";0<=j&&(n+="+"),n+=j+" "+a+" ",""!=input.attackerDataset.value&&(n+=input.attackerDataset.value.split(",")[0]+" "),n+="with "+g+"BP] vs [",0<=k&&(n+="+"),n+=k+" "+b+" ",""!=input.defenderDataset.value&&(n+=input.defenderDataset.value.split(",")[0]+" "),n+="with "+input.defenderHPStat.value+"HP]";let o=n+"\n";switch(input.badgeBoostAtk.checked&&(a=0|1.1*a),input.badgeBoostDef.checked&&(b=0|1.1*b),input.itemBoost.checked&&(a=0|1.1*a),input.abilityBoost.checked&&(g=0|1.5*g),!0){case 0<j:aSM=(10+5*j)/10;break;case 0>j:aSM=10/(10+-5*j);break;default:aSM=1;}switch(!0){case 0>k:dSM=10/(10+-5*k);break;case 0<k:dSM=(10+5*k)/10;break;default:dSM=1;}c=0|Math.trunc(Math.trunc(2*l/5+2)*(a*aSM)*g/(b*dSM))/50,e=0|Math.trunc(Math.trunc(2*l/5+2)*(a*(0>=j?1:aSM))*g/(b*(0<=k?1:dSM)))/50,input.lsrefcheck.checked&&(input.doublecheck.checked?(c=0|c*(2/3),e=0|e*(2/3)):(c=0|.5*c,e=0|.5*e)),input.doublecheck.checked&&(c=0|.5*c,e=0|.5*e),"goodweather"===h?(c=0|1.5*c,e=0|1.5*e):"badweather"===h?(c=0|.5*c,e=0|.5*e):void 0,c+=2,e+=2,e*=2,input.stabcheck.checked&&(c=0|1.5*c,e=0|1.5*e),c=0|c*input.typeeffect.value,e=0|e*input.typeeffect.value;let p=rollDamage(c),q=rollDamage(e);if(p.rolls[0]<m)p.OHKO=0;else{f=0;for(let a of p.rolls)if(a>=m)f++;else break;p.OHKO=100*(f/16)}if(p.minRollPercentage=0|100*(p.rolls[15]/m),p.maxRollPercentage=0|100*(p.rolls[0]/m),o+=input.outputVerbose.checked?p.rollsVerbose:p.rolls[15]+" ("+p.minRollPercentage+"%)  - "+p.rolls[0]+" ("+p.maxRollPercentage+"%)",o+="\n"+p.OHKO+"% chance to OHKO",input.outputVerbose.checked&&(o+=" ("+p.minRollPercentage+"% to "+p.maxRollPercentage+"%)"),input.showCrits.checked){if(q.rolls[0]<m)q.OHKO=0;else{f=0;for(let a of p.rolls)if(a>=m)f++;else break;q.OHKO=100*(f/16)}q.minRollPercentage=0|100*(q.rolls[15]/m),q.maxRollPercentage=0|100*(q.rolls[0]/m),input.outputarea.style.height="102px",o+="\n"+n+" CRIT\n",o+=input.outputVerbose.checked?q.rollsVerbose+"\n"+q.OHKO+"% chance to OHKO ("+q.minRollPercentage+"% to "+q.maxRollPercentage+"%)":q.rolls[15]+" ("+q.minRollPercentage+"%)  - "+q.rolls[0]+" ("+q.maxRollPercentage+"%)\n"+q.OHKO+"% chance to OHKO"}else input.outputarea.style.height="56px";switch(input.outputarea.innerHTML=o,p.OHKO){case 0:input.outputarea.className="lives";break;case 100:input.outputarea.className="kill";break;default:input.outputarea.className="range";}}function pokeSearch(a){let b,c;switch(a.name){case"attackerName":b=document.querySelector("#search-attacker>table>tbody").children,c=$("#search-attacker-empty-result"),c.hide(),advMode.clearAttacker();break;case"defenderName":b=document.querySelector("#search-defender>table>tbody").children,c=$("#search-defender-empty-result"),c.hide(),advMode.clearDefender();break;default:return!1;}if(""==a.value){for(let a of b)a.style.display="table-row";return!1}let e=!1;for(let c of b)-1===c.dataset.pokemonname.indexOfIgnoreCase(a.value)?c.style.display="none":(c.style.display="table-row",e=!0);!1==e&&c.show(),DamageCalc()}function pokeSearchPick(a,b){let c,e=a.dataset;switch(b){case"attacker":c=[document.getElementById("attacker-name"),document.getElementById("attacker-icon"),document.getElementById("attacker-dataset")];break;case"defender":c=[document.getElementById("defender-name"),document.getElementById("defender-icon"),document.getElementById("defender-dataset")];break;default:return!1;}c[0].value=e.pokemonname,c[1].src="i/mons/icons/"+e.pokemonid+".png",("attacker"==b&&advMode.enabled||"defender"==b)&&(c[2].value=e.pokemonname+","+e.pokemonstats);let f=e.pokemontype.split(",");"defender"==b&&(currentPick="DefTypeA",pickType(f[0],!1),currentPick="DefTypeB",pickType(f[1],!1),advMode.enabled&&advMode.suggestDefenderHP()),DamageCalc()}async function pokeSearchInstall(){let a=new XMLHttpRequest;a.open("GET","js/pokestats.json"),a.onload=()=>{let b,c,e=JSON.parse(a.responseText).pokemon,f=$("#search-attacker").find("table>tbody"),g=$("#search-defender").find("table>tbody");for(mon of e)b=$("<tr/>",{"data-pokemonname":mon.name,"data-pokemonid":mon.id,"data-pokemontype":mon.type.join(","),"data-pokemonstats":mon.basestats.join(",")}),b.append($("<td/>").append($("<img>",{src:"i/mons/icons/"+mon.id+".png",alt:mon.id}))).append($("<td/>").html(mon.id)).append($("<td/>",{colspan:4}).html(mon.name)).append($("<td/>",{colspan:"none"==mon.type[1]?2:1}).append($("<img>",{src:"i/"+mon.type[0]+".gif",alt:mon.type[0],class:"poketype"}))),"none"!=mon.type[1]&&b.append($("<td/>").append($("<img>",{src:"i/"+mon.type[1]+".gif",alt:mon.type[1],class:"poketype"}))),c=b.clone(),b.on("mousedown",function(){pokeSearchPick(this,"attacker")}),b.appendTo(f),c.on("mousedown",function(){pokeSearchPick(this,"defender")}),c.appendTo(g)},a.send()}function openTypePicker(a){pickerDIV=document.getElementById("typePicker");"AtkType"===a?(pickerDIV.getElementsByTagName("span")[0].innerHTML="Choose the Attack Type:",pickerDIV.style.left="172px",$(pickerDIV.getElementsByTagName("img")[0]).hide()):"DefTypeA"===a?(pickerDIV.getElementsByTagName("span")[0].innerHTML="Choose the Defender's first type:",pickerDIV.style.left="572px",$(pickerDIV.getElementsByTagName("img")[0]).hide()):"DefTypeB"===a?(pickerDIV.getElementsByTagName("span")[0].innerHTML="Choose the Defender's secondary type:",pickerDIV.style.left="718px",$(pickerDIV.getElementsByTagName("img")[0]).show()):void 0;pickerDIV.style.top="336px",currentPick=a,$(pickerDIV).show(),$("#typePicker-clicktrap").show()}function pickType(a,b){document.getElementById(currentPick+"Img").src="i/"+a+".gif";"AtkType"===currentPick?(AtkType=a,$("#lsreflabel")[0].innerHTML="Physical"==typeReference[a].type?"Does Reflect apply?":"Does Light Screen apply?"):"DefTypeA"===currentPick?(DefTypeA=a,!1!==b&&advMode.clearDefender()):"DefTypeB"===currentPick?(DefTypeB=a,!1!==b&&advMode.clearDefender()):void 0;$("#typePicker").hide(),$("#typePicker-clicktrap").hide(),document.getElementById("typeeffect").value=typeReference[AtkType][DefTypeA]*typeReference[AtkType][DefTypeB],document.getElementById("MoveType").src="i/"+typeReference[AtkType].type+".png",document.getElementById("MoveTypeText").innerHTML=typeReference[AtkType].type,DamageCalc()}function collectionAppendCurrent(){currentCalc=document.getElementById("calcInput").elements.outputarea.value,userTitle=document.getElementById("save-dialog").elements.calcName,currentCollection=document.getElementById("calc-collection").elements.collection,currentCollection.value+=userTitle.value+"\n",currentCollection.value+=currentCalc,currentCollection.value+="\r\n \r\n",$("#save-dialog").hide(),$("#save-options").show(),$("#collection-options").show(),$("#calc-collection").show(),currentCollection.style.height=currentCollection.scrollHeight-28+"px",userTitle.value=""}function collectionSaveDialog(){return $("#save-dialog").show().find("input[type=text]").focus(),void $("#save-options").hide()}function collectionSaveAs(){if(collectionArea=document.getElementById("collectionarea"),""==collectionArea.value)return!1;collectionContent=collectionArea.value.replace(/([^\r])\n/g,"$1\r\n");var a=new Blob([collectionContent],{type:"text/plain;charset=Windows-1252"});d=new Date,saveDate="",10>d.getDate()&&(saveDate+="0"),saveDate+=d.getDate(),10>d.getMonth()+1&&(saveDate+="0"),saveDate+=d.getMonth()+1,saveDate+=d.getFullYear(),10>d.getHours()&&(saveDate+="0"),saveDate+=d.getHours(),10>d.getMinutes()&&(saveDate+="0"),saveDate+=d.getMinutes(),fileName="damage-calcs-"+saveDate+".txt",saveAs(a,fileName)}function collectionClear(){document.getElementById("collectionarea").value="",currentCollection.style.height=currentCollection.scrollHeight+"px",$("#collection-options").hide(),$("#calc-collection").hide()}advMode.toggle=function(){advMode.enabled?($("#calcInput").removeClass("advanced-enabled"),advMode.clearAttacker("i/atk.png"),$("#defenderHPStatLabel").html("Current HP:"),advMode.enabled=!1):($("#calcInput").addClass("advanced-enabled"),document.getElementById("attacker-icon").src="i/mons/icons/000.png",advMode.enabled=!0),DamageCalc()},advMode.calcAttacker=function(){let a,b,c=input.attackerAtkStatIv.valueAsNumber,e=input.attackerAtkStatEv.valueAsNumber,f=input.attackerLevel.valueAsNumber,g=radioValue("attackerNature"),h=input.attackerDataset.value;return""!=h&&(h=h.split(","),b="Physical"==typeReference[AtkType].type?+h[2]:+h[4],a=0|(0|(2*b+c+(0|e/4))*f/100+5)*("positive"==g?1.1:"negative"==g?.9:1),a)},advMode.calcDefender=function(){let a,b,c=input.defenderDefStatIv.valueAsNumber,e=input.defenderDefStatEv.valueAsNumber,f=input.defenderLevel.valueAsNumber,g=radioValue("defenderNature"),h=input.defenderDataset.value;return""!=h&&(h=h.split(","),b="Physical"==typeReference[AtkType].type?+h[3]:+h[5],a=0|(0|(2*b+c+(0|e/4))*f/100+5)*("positive"==g?1.1:"negative"==g?.9:1),a)},advMode.clearAttacker=function(a){$("#attacker-dataset")[0].value="",$("#attacker-icon")[0].src=a||"i/mons/icons/000.png"},advMode.clearDefender=function(a){$("#defender-dataset")[0].value="",$("#defender-icon")[0].src=a||"i/mons/icons/000.png",$("#defenderHPStatLabel").html("Current HP:"),input.defenderHPStat.max=999},advMode.suggestDefenderHP=function(){let a,b,c=input.defenderLevel.valueAsNumber,e=input.defenderDataset.value;return""!=e&&void(e=e.split(","),b=e[1],a=(0|(2*b+31+63)*c/100)+c+10,input.defenderHPStat.valueAsNumber>a&&(input.defenderHPStat.value=a),$("#defenderHPStatLabel").html("Current HP (up to "+a+"):"),input.defenderHPStat.max=a)},!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,b.Clipboard=a()}}(function(){var b;return function b(f,e,g){function c(i,a){if(!e[i]){if(!f[i]){var j="function"==typeof require&&require;if(!a&&j)return j(i,!0);if(h)return h(i,!0);var k=new Error("Cannot find module '"+i+"'");throw k.code="MODULE_NOT_FOUND",k}var l=e[i]={exports:{}};f[i][0].call(l.exports,function(a){var b=f[i][1][a];return c(b||a)},l,l.exports,b,f,e,g)}return e[i].exports}for(var h="function"==typeof require&&require,i=0;i<g.length;i++)c(g[i]);return c}({1:[function(a,b){if("undefined"!=typeof Element&&!Element.prototype.matches){var c=Element.prototype;c.matches=c.matchesSelector||c.mozMatchesSelector||c.msMatchesSelector||c.oMatchesSelector||c.webkitMatchesSelector}b.exports=function(a,b){for(;a&&a.nodeType!==9;){if("function"==typeof a.matches&&a.matches(b))return a;a=a.parentNode}}},{}],2:[function(a,b){function c(b,c,e,g,h){var i=f.apply(this,arguments);return b.addEventListener(e,i,h),{destroy:function(){b.removeEventListener(e,i,h)}}}function f(a,b,c,e){return function(c){c.delegateTarget=g(c.target,b),c.delegateTarget&&e.call(a,c)}}var g=a("./closest");b.exports=c},{"./closest":1}],3:[function(a,b,c){c.node=function(a){return void 0!==a&&a instanceof HTMLElement&&1===a.nodeType},c.nodeList=function(a){var b=Object.prototype.toString.call(a);return void 0!==a&&("[object NodeList]"===b||"[object HTMLCollection]"===b)&&"length"in a&&(0===a.length||c.node(a[0]))},c.string=function(a){return"string"==typeof a||a instanceof String},c.fn=function(a){return"[object Function]"===Object.prototype.toString.call(a)}},{}],4:[function(b,f){function g(a,b,c){return a.addEventListener(b,c),{destroy:function(){a.removeEventListener(b,c)}}}function h(a,b,c){return Array.prototype.forEach.call(a,function(a){a.addEventListener(b,c)}),{destroy:function(){Array.prototype.forEach.call(a,function(a){a.removeEventListener(b,c)})}}}function i(a,b,e){return c(document.body,a,b,e)}var a=b("./is"),c=b("delegate");f.exports=function(b,c,e){if(!b&&!c&&!e)throw new Error("Missing required arguments");if(!a.string(c))throw new TypeError("Second argument must be a String");if(!a.fn(e))throw new TypeError("Third argument must be a Function");if(a.node(b))return g(b,c,e);if(a.nodeList(b))return h(b,c,e);if(a.string(b))return i(b,c,e);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},{"./is":3,delegate:2}],5:[function(a,b){function c(a){var b;if("SELECT"===a.nodeName)a.focus(),b=a.value;else if("INPUT"===a.nodeName||"TEXTAREA"===a.nodeName){var c=a.hasAttribute("readonly");c||a.setAttribute("readonly",""),a.select(),a.setSelectionRange(0,a.value.length),c||a.removeAttribute("readonly"),b=a.value}else{a.hasAttribute("contenteditable")&&a.focus();var f=window.getSelection(),g=document.createRange();g.selectNodeContents(a),f.removeAllRanges(),f.addRange(g),b=f.toString()}return b}b.exports=c},{}],6:[function(a,b){function c(){}c.prototype={on:function(a,b,c){var e=this.e||(this.e={});return(e[a]||(e[a]=[])).push({fn:b,ctx:c}),this},once:function(a,b,c){function e(){f.off(a,e),b.apply(c,arguments)}var f=this;return e._=b,this.on(a,e,c)},emit:function(a){var b=[].slice.call(arguments,1),c=((this.e||(this.e={}))[a]||[]).slice(),e=0,f=c.length;for(e;e<f;e++)c[e].fn.apply(c[e].ctx,b);return this},off:function(b,c){var e=this.e||(this.e={}),f=e[b],g=[];if(f&&c)for(var h=0,i=f.length;h<i;h++)f[h].fn!==c&&f[h].fn._!==c&&g.push(f[h]);return g.length?e[b]=g:delete e[b],this}},b.exports=c},{}],7:[function(c,e,f){!function(g,h){if("function"==typeof b&&b.amd)b(["module","select"],h);else if(void 0!==f)h(e,c("select"));else{var i={exports:{}};h(i,g.select),g.clipboardAction=i.exports}}(this,function(b,f){"use strict";function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var h=function(a){return a&&a.__esModule?a:{default:a}}(f),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e=function(){function a(a,b){for(var c,e=0;e<b.length;e++)c=b[e],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,e){return c&&a(b.prototype,c),e&&a(b,e),b}}(),a=function(){function a(b){g(this,a),this.resolveOptions(b),this.initSelection()}return e(a,[{key:"resolveOptions",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action=a.action,this.container=a.container,this.emitter=a.emitter,this.target=a.target,this.text=a.text,this.trigger=a.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var a=this,b="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return a.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[b?"right":"left"]="-9999px";var c=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=c+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,h.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,h.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var a;try{a=document.execCommand(this.action)}catch(b){a=!1}this.handleResult(a)}},{key:"handleResult",value:function(a){this.emitter.emit(a?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=a,"copy"!==this._action&&"cut"!==this._action)throw new Error("Invalid \"action\" value, use either \"copy\" or \"cut\"")},get:function(){return this._action}},{key:"target",set:function(a){if(void 0!==a){if(!a||"object"!==(void 0===a?"undefined":i(a))||1!==a.nodeType)throw new Error("Invalid \"target\" value, use a valid Element");if("copy"===this.action&&a.hasAttribute("disabled"))throw new Error("Invalid \"target\" attribute. Please use \"readonly\" instead of \"disabled\" attribute");if("cut"===this.action&&(a.hasAttribute("readonly")||a.hasAttribute("disabled")))throw new Error("Invalid \"target\" attribute. You can't cut text from elements with \"readonly\" or \"disabled\" attributes");this._target=a}},get:function(){return this._target}}]),a}();b.exports=a})},{select:5}],8:[function(c,e,f){!function(g,h){if("function"==typeof b&&b.amd)b(["module","./clipboard-action","tiny-emitter","good-listener"],h);else if(void 0!==f)h(e,c("./clipboard-action"),c("tiny-emitter"),c("good-listener"));else{var i={exports:{}};h(i,g.clipboardAction,g.tinyEmitter,g.goodListener),g.clipboard=i.exports}}(this,function(b,g,e,j){"use strict";function k(a){return a&&a.__esModule?a:{default:a}}function i(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function m(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"==typeof b||"function"==typeof b)?b:a}function a(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function c(a,b){var c="data-clipboard-"+a;if(b.hasAttribute(c))return b.getAttribute(c)}var l=k(g),n=k(e),o=k(j),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},q=function(){function a(a,b){for(var c,e=0;e<b.length;e++)c=b[e],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,e){return c&&a(b.prototype,c),e&&a(b,e),b}}(),h=function(b){function g(a,b){i(this,g);var c=m(this,(g.__proto__||Object.getPrototypeOf(g)).call(this));return c.resolveOptions(b),c.listenClick(a),c}return a(g,b),q(g,[{key:"resolveOptions",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof a.action?a.action:this.defaultAction,this.target="function"==typeof a.target?a.target:this.defaultTarget,this.text="function"==typeof a.text?a.text:this.defaultText,this.container="object"===f(a.container)?a.container:document.body}},{key:"listenClick",value:function(a){var b=this;this.listener=(0,o.default)(a,"click",function(a){return b.onClick(a)})}},{key:"onClick",value:function(a){var b=a.delegateTarget||a.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new l.default({action:this.action(b),target:this.target(b),text:this.text(b),container:this.container,trigger:b,emitter:this})}},{key:"defaultAction",value:function(a){return c("action",a)}},{key:"defaultTarget",value:function(a){var b=c("target",a);if(b)return document.querySelector(b)}},{key:"defaultText",value:function(a){return c("text",a)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:["copy","cut"],b="string"==typeof a?[a]:a,c=!!document.queryCommandSupported;return b.forEach(function(a){c=c&&!!document.queryCommandSupported(a)}),c}}]),g}(n.default);b.exports=h})},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)});document.getElementsByForm=function(e){let f,g,h=new TypeError("form must be valid DOM or a string with either id or name of the form.");switch(typeof e){case"string":if(""==e)throw h;if(g=document.getElementById(e),null===g){for(g=document.getElementsByTagName("FORM"),f=0;f<g.length;f++)if(g[f].name==e){e=g[f];break}if("string"==typeof e)throw h}else if("FORM"==g.tagName)e=g;else throw h;case"object":if("FORM"==e.tagName&&e.elements)return 0==e.elements.length?null:e.elements;throw h;break;default:throw h;}};function radioValue(c){if(void 0===c||""==c)throw new TypeError("name must be a string and cannot be empty");let a=document.getElementsByName(c);for(let b=0;b<a.length;b++)if("radio"==a[b].type&&a[b].checked)return a[b].value;return!1}String.prototype.equalsIgnoreCase=function(b){if(void 0===b||""==b)throw new TypeError("str cannot be empty");return this.toLowerCase()==(b+"").toLowerCase()},String.prototype.indexOfIgnoreCase=function(b){if(void 0===b||""==b)throw new TypeError("needle cannot be empty");return this.toLowerCase().indexOf((b+"").toLowerCase())};var saveAs=saveAs||function(b){"use strict";if(!("undefined"==typeof b||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=b.document,g=function(){return b.URL||b.webkitURL||b},h=e.createElementNS("http://www.w3.org/1999/xhtml","a"),j="download"in h,k=function(a){var b=new MouseEvent("click");a.dispatchEvent(b)},a=/constructor/i.test(b.HTMLElement)||b.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent),n=function(a){(b.setImmediate||b.setTimeout)(function(){throw a},0)},q=function(a){setTimeout(function(){"string"==typeof a?g().revokeObjectURL(a):a.remove()},40000)},c=function(a,b,c){b=[].concat(b);for(var e,f=b.length;f--;)if(e=a["on"+b[f]],"function"==typeof e)try{e.call(a,c||a)}catch(b){n(b)}},l=function(a){return /^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a},f=function(e,n,f){f||(e=l(e));var s,u=this,o=e.type,m=o==="application/octet-stream",v=function(){c(u,["writestart","progress","write","writeend"])},r=function(){if((i||m&&a)&&b.FileReader){var c=new FileReader;return c.onloadend=function(){var a=i?c.result:c.result.replace(/^data:[^;]*;/,"data:attachment/file;"),e=b.open(a,"_blank");e||(b.location.href=a),a=void 0,u.readyState=u.DONE,v()},c.readAsDataURL(e),void(u.readyState=u.INIT)}if(s||(s=g().createObjectURL(e)),m)b.location.href=s;else{var f=b.open(s,"_blank");f||(b.location.href=s)}u.readyState=u.DONE,v(),q(s)};return u.readyState=u.INIT,j?(s=g().createObjectURL(e),void setTimeout(function(){h.href=s,h.download=n,k(h),v(),q(s),u.readyState=u.DONE})):void r()},o=f.prototype,p=function(a,b,c){return new f(a,b||a.name||"download",c)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(a,b,c){return b=b||a.name||"download",c||(a=l(a)),navigator.msSaveOrOpenBlob(a,b)}:(o.abort=function(){},o.readyState=o.INIT=0,o.WRITING=1,o.DONE=2,o.error=o.onwritestart=o.onprogress=o.onwrite=o.onabort=o.onerror=o.onwriteend=null,p)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this);"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define("FileSaver.js",function(){return saveAs});